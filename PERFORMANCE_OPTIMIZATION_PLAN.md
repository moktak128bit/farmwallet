# 성능 최적화 방안 리스트

## 🔴 긴급 (즉시 적용 필요)

### 1. 가상화(Virtualization) 적용
- **문제**: 가계부와 거래 내역 테이블에서 수백~수천 개의 행을 한 번에 렌더링
- **해결**: `react-window` 또는 `react-virtualized` 라이브러리 사용
- **대상 파일**:
  - `LedgerView.tsx`: `filteredLedger.map()` 부분 (약 2273라인)
  - `StocksView.tsx`: 거래 내역 테이블 (약 2740라인)
- **예상 효과**: 초기 렌더링 시간 80-90% 감소

### 2. 차트 지연 로딩(Lazy Loading)
- **문제**: DashboardView에서 모든 차트를 한 번에 렌더링
- **해결**: 
  - `React.lazy()`와 `Suspense`로 차트 컴포넌트 지연 로딩
  - 또는 Intersection Observer로 뷰포트에 들어올 때만 렌더링
- **대상 파일**: `DashboardView.tsx`
- **예상 효과**: 초기 로딩 시간 50-70% 감소

### 3. 차트 데이터 샘플링
- **문제**: 월별 순자산 차트에서 모든 데이터 포인트를 렌더링
- **해결**: 
  - 데이터가 100개 이상이면 샘플링 (예: 50개만 표시)
  - 또는 줌/패닝 기능 추가하여 필요한 부분만 렌더링
- **대상 파일**: `DashboardView.tsx`
- **예상 효과**: 차트 렌더링 시간 60-80% 감소

## 🟡 중요 (단기간 내 적용)

### 4. React.memo로 컴포넌트 메모이제이션
- **문제**: 테이블 행 컴포넌트가 불필요하게 재렌더링됨
- **해결**: 
  - 테이블 행을 별도 컴포넌트로 분리하고 `React.memo` 적용
  - 차트 컴포넌트도 `React.memo`로 감싸기
- **대상 파일**:
  - `LedgerView.tsx`: 테이블 행 컴포넌트
  - `StocksView.tsx`: 거래 내역 행 컴포넌트
  - `DashboardView.tsx`: 차트 컴포넌트들
- **예상 효과**: 재렌더링 횟수 50-70% 감소

### 5. useMemo/useCallback 최적화
- **문제**: 일부 계산이 매 렌더링마다 실행됨
- **해결**: 
  - 모든 필터링/정렬 로직을 `useMemo`로 감싸기
  - 이벤트 핸들러를 `useCallback`으로 메모이제이션
  - 의존성 배열 최적화
- **대상 파일**: 모든 컴포넌트
- **예상 효과**: 불필요한 계산 40-60% 감소

### 6. 테이블 페이징/무한 스크롤
- **문제**: 모든 데이터를 한 번에 표시
- **해결**: 
  - 페이지당 50-100개만 표시
  - 또는 무한 스크롤로 필요할 때만 로드
- **대상 파일**:
  - `LedgerView.tsx`
  - `StocksView.tsx`
- **예상 효과**: 초기 렌더링 시간 70-85% 감소

### 7. 차트 렌더링 최적화
- **문제**: Recharts가 모든 데이터 포인트를 DOM에 렌더링
- **해결**: 
  - `isAnimationActive={false}` 설정 (애니메이션 비활성화)
  - `syncId` 제거 또는 최적화
  - 불필요한 `Tooltip`, `Legend` 제거 또는 조건부 렌더링
- **대상 파일**: `DashboardView.tsx`, `StocksView.tsx`, `ReportView.tsx`
- **예상 효과**: 차트 렌더링 시간 30-50% 감소

## 🟢 개선 (중장기)

### 8. Web Worker로 무거운 계산 분리
- **문제**: 대량 데이터 필터링/정렬이 메인 스레드 블로킹
- **해결**: 
  - `computeAccountBalances`, `computePositions` 등을 Web Worker로 이동
  - 또는 `useWorkerizedReducer` 사용
- **대상 파일**: `calculations.ts`
- **예상 효과**: UI 반응성 크게 개선

### 9. 인덱싱 및 캐싱
- **문제**: 매번 전체 배열을 순회하여 필터링
- **해결**: 
  - 날짜별, 계좌별 인덱스 맵 생성
  - 자주 사용하는 계산 결과 캐싱
- **대상 파일**: `LedgerView.tsx`, `StocksView.tsx`
- **예상 효과**: 필터링/검색 속도 60-80% 향상

### 10. 코드 스플리팅
- **문제**: 모든 컴포넌트가 한 번에 로드됨
- **해결**: 
  - 라우트별 코드 스플리팅
  - 차트 라이브러리 지연 로딩
- **대상 파일**: `App.tsx`
- **예상 효과**: 초기 번들 크기 30-50% 감소

### 11. 데이터베이스 인덱싱 (localStorage 최적화)
- **문제**: localStorage에서 전체 데이터를 매번 읽기
- **해결**: 
  - IndexedDB로 마이그레이션
  - 또는 localStorage에 인덱스 구조 추가
- **대상 파일**: `storage.ts`
- **예상 효과**: 데이터 로딩 시간 50-70% 감소

### 12. 디바운싱/스로틀링
- **문제**: 입력 시마다 즉시 필터링/검색 실행
- **해결**: 
  - 검색 입력에 디바운싱 적용 (300-500ms)
  - 스크롤 이벤트에 스로틀링 적용
- **대상 파일**: 모든 입력 필드
- **예상 효과**: 불필요한 계산 70-90% 감소

## 📊 우선순위별 적용 계획

### Phase 1 (즉시 - 1-2일)
1. 가상화 적용 (LedgerView, StocksView)
2. 차트 지연 로딩 (DashboardView)
3. 차트 데이터 샘플링

### Phase 2 (단기 - 3-5일)
4. React.memo 적용
5. useMemo/useCallback 최적화
6. 테이블 페이징
7. 차트 렌더링 최적화

### Phase 3 (중기 - 1-2주)
8. Web Worker 적용
9. 인덱싱 및 캐싱
10. 코드 스플리팅

### Phase 4 (장기 - 2-4주)
11. IndexedDB 마이그레이션
12. 디바운싱/스로틀링

## 🎯 예상 성능 개선 효과

- **초기 로딩 시간**: 70-85% 감소
- **렌더링 시간**: 60-80% 감소
- **재렌더링 횟수**: 50-70% 감소
- **메모리 사용량**: 40-60% 감소
- **UI 반응성**: 크게 개선

## 📝 참고사항

- 각 최적화는 단계적으로 적용하고 성능 측정 필요
- 사용자 경험을 해치지 않는 선에서 최적화 진행
- 프로파일링 도구(React DevTools Profiler)로 실제 병목 지점 확인 권장





